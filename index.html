import React, { useState } from 'react';
import ReactDOM from 'react-dom/client';

const Platform = () => {
  const [teacher, setTeacher] = useState("ููุฑุฉ ุงููุงููู");
  const [stage, setStage] = useState("ุฑูุงุถ ุงูุฃุทูุงู");
  const [subject, setSubject] = useState("ุงูุนููู ุงูุนุงูุฉ");
  const [files, setFiles] = useState([]);
  const [visits, setVisits] = useState({ chemistry: 0, physics: 0, biology: 0, science: 0 });

  const stages = ["ุฑูุงุถ ุงูุฃุทูุงู", "ุงูุงุจุชุฏุงุฆู", "ุงููุชูุณุท", "ุงูุซุงููู"];
  const subjects = ["ุงูุนููู ุงูุนุงูุฉ", "ุงูููููุงุก", "ุงูููุฒูุงุก", "ุงูุฃุญูุงุก", "ุงูุฑูุงุถูุงุช", "ุงููุบุฉ ุงูุนุฑุจูุฉ"];

  const handleUpload = (e) => {
    const file = e.target.files[0];
    if (file) {
      setFiles([...files, { name: file.name, owner: teacher, stage, subject, date: new Date().toLocaleDateString() }]);
      alert(`ุชู ุฑูุน ููู ${file.name} ุจูุฌุงุญ!\nุงููุนููุฉ: ${teacher}\nุงููุงุฏุฉ: ${subject}`);
    }
  };

  return (
    <div className="min-h-screen bg-gray-50 p-4 md:p-8 text-right" dir="rtl">
      {/* ุฑุฃุณ ุงูุตูุญุฉ - ูุฌูุน ุงูุณุญู */}
      <header className="bg-white shadow-lg rounded-2xl p-6 mb-8 border-b-4 border-blue-600">
        <div className="flex justify-between items-center flex-wrap gap-4">
          <div>
            <h1 className="text-3xl font-bold text-blue-900">ูุฌูุน ุงูุณุญู</h1>
            <p className="text-gray-600">ููุตุฉ ุชูููู ุงูุงุณุชุฑุงุชูุฌูุงุช ุงูุชุนููููุฉ ุงูููุนูุฉ</p>
          </div>
          <div className="flex gap-4 items-center">
            <div>
              <label className="block text-xs text-gray-500">ุงุฎุชุฑ ุงููุนููุฉ:</label>
              <select onChange={(e) => setTeacher(e.target.value)} className="border p-2 rounded-lg bg-blue-50 font-bold">
                <option value="ููุฑุฉ ุงููุงููู">ููุฑุฉ ุงููุงููู</option>
                <option value="ูุดุงุนู ุงูุดุฑูู">ูุดุงุนู ุงูุดุฑูู</option>
              </select>
            </div>
          </div>
        </div>
      </header>

      <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
        {/* ูุณู ุงูุฑูุน ูุชุญุฏูุฏ ุงููุงุฏุฉ */}
        <div className="lg:col-span-2 space-y-6">
          <div className="bg-white p-6 rounded-2xl shadow-sm border border-gray-100">
            <h2 className="text-xl font-bold mb-4 text-blue-800">ุฅุถุงูุฉ ููุฑุฏ ุชุนูููู ุฌุฏูุฏ</h2>
            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
              <div>
                <label className="block mb-2 text-sm">ุงููุฑุญูุฉ ุงูุฏุฑุงุณูุฉ:</label>
                <select onChange={(e) => setStage(e.target.value)} className="w-full border p-2 rounded-lg">
                  {stages.map(s => <option key={s} value={s}>{s}</option>)}
                </select>
              </div>
              <div>
                <label className="block mb-2 text-sm">ุงููุงุฏุฉ ุงูุฏุฑุงุณูุฉ:</label>
                <select onChange={(e) => setSubject(e.target.value)} className="w-full border p-2 rounded-lg">
                  {subjects.map(sub => <option key={sub} value={sub}>{sub}</option>)}
                </select>
              </div>
            </div>
            <div className="border-2 border-dashed border-blue-200 rounded-xl p-8 text-center bg-blue-50 hover:bg-blue-100 transition cursor-pointer"
                 onClick={() => document.getElementById('uploader').click()}>
              <input id="uploader" type="file" hidden onChange={handleUpload} />
              <span className="text-4xl">๐ค</span>
              <p className="mt-2 font-bold text-blue-700">ุงุถุบุทู ููุง ูุฑูุน ุงูููู (PDF, PPT)</p>
            </div>
          </div>

          {/* ุนุฑุถ ุงููููุงุช ุงููุฑููุนุฉ */}
          <div className="bg-white p-6 rounded-2xl shadow-sm">
            <h2 className="text-xl font-bold mb-4 border-r-4 border-blue-600 pr-3">ููุงุฑุฏู ุงููุฑููุนุฉ (ุฃ/ {teacher})</h2>
            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
              {files.filter(f => f.owner === teacher).map((f, i) => (
                <div key={i} className="p-4 bg-gray-50 rounded-xl border border-gray-100 flex items-center justify-between">
                  <div>
                    <p className="font-bold text-blue-900">{f.name}</p>
                    <p className="text-xs text-gray-500">{f.stage} - {f.subject}</p>
                  </div>
                  <span className="text-xs bg-white px-2 py-1 rounded shadow-sm">{f.date}</span>
                </div>
              ))}
              {files.filter(f => f.owner === teacher).length === 0 && <p className="text-gray-400 italic">ูู ูุชู ุฑูุน ูููุงุช ุจุนุฏ.</p>}
            </div>
          </div>
        </div>

        {/* ูุณู ุฅุญุตุงุฆูุงุช ุงูุฒูุงุฑุงุช ููููุงุฏ ุงูุนูููุฉ */}
        <div className="space-y-6">
          <div className="bg-white p-6 rounded-2xl shadow-sm">
            <h2 className="text-xl font-bold mb-4 text-gray-800 italic underline">ุฅุญุตุงุฆูุงุช ุฒูุงุฑุงุช ุงูููุงูุฌ</h2>
            <div className="space-y-3">
              {[
                {id: 'chemistry', label: 'ุงูููููุงุก', color: 'bg-red-50', btn: 'bg-red-600'},
                {id: 'physics', label: 'ุงูููุฒูุงุก', color: 'bg-blue-50', btn: 'bg-blue-600'},
                {id: 'biology', label: 'ุงูุฃุญูุงุก', color: 'bg-green-50', btn: 'bg-green-600'},
                {id: 'science', label: 'ุงูุนููู', color: 'bg-yellow-50', btn: 'bg-yellow-600'}
              ].map(item => (
                <div key={item.id} className={`${item.color} p-4 rounded-xl flex justify-between items-center`}>
                  <span className="font-bold">{item.label}</span>
                  <button onClick={() => setVisits({...visits, [item.id]: visits[item.id] + 1})} 
                          className={`${item.btn} text-white px-4 py-1 rounded-full text-sm shadow-md active:scale-95 transition`}>
                    ุงูุฒูุงุฑุงุช: {visits[item.id]}
                  </button>
                </div>
              ))}
            </div>
          </div>
        </div>
      </div>
    </div>
  );
};

const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(<Platform />);
